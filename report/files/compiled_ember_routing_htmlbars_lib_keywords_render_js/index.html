<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - compiled\ember-routing-htmlbars\lib\keywords\render.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>compiled\ember-routing-htmlbars\lib\keywords\render.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">61.95</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">255</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">39.34</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.25</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&#039;use strict&#039;;

Object.defineProperty(exports, &#039;__esModule&#039;, {
  value: true
});

function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { &#039;default&#039;: obj }; }

var _emberMetalCore = require(&#039;ember-metal/core&#039;);

var _emberMetalCore2 = _interopRequireDefault(_emberMetalCore);

// assert

var _emberMetalProperty_get = require(&#039;ember-metal/property_get&#039;);

var _emberMetalError = require(&#039;ember-metal/error&#039;);

var _emberMetalError2 = _interopRequireDefault(_emberMetalError);

var _emberMetalStreamsUtils = require(&#039;ember-metal/streams/utils&#039;);

var _emberRuntimeSystemString = require(&#039;ember-runtime/system/string&#039;);

var _emberRoutingSystemGenerate_controller = require(&#039;ember-routing/system/generate_controller&#039;);

var _emberRoutingSystemGenerate_controller2 = _interopRequireDefault(_emberRoutingSystemGenerate_controller);

var _emberHtmlbarsNodeManagersViewNodeManager = require(&#039;ember-htmlbars/node-managers/view-node-manager&#039;);

var _emberHtmlbarsNodeManagersViewNodeManager2 = _interopRequireDefault(_emberHtmlbarsNodeManagersViewNodeManager);

exports[&#039;default&#039;] = {
  willRender: function willRender(renderNode, env) {
    if (env.view.ownerView._outlets) {
      // We make sure we will get dirtied when outlet state changes.
      env.view.ownerView._outlets.push(renderNode);
    }
  },

  setupState: function setupState(prevState, env, scope, params, hash) {
    var name = params[0];

    _emberMetalCore2[&#039;default&#039;].assert(&#039;The first argument of {{render}} must be quoted, e.g. {{render &quot;sidebar&quot;}}.&#039;, typeof name === &#039;string&#039;);

    return {
      parentView: scope.view,
      manager: prevState.manager,
      controller: prevState.controller,
      childOutletState: childOutletState(name, env)
    };
  },

  childEnv: function childEnv(state, env) {
    return env.childWithOutletState(state.childOutletState);
  },

  isStable: (function (_isStable) {
    function isStable(_x, _x2) {
      return _isStable.apply(this, arguments);
    }

    isStable.toString = function () {
      return _isStable.toString();
    };

    return isStable;
  })(function (lastState, nextState) {
    return isStable(lastState.childOutletState, nextState.childOutletState);
  }),

  isEmpty: function isEmpty(state) {
    return false;
  },

  render: function render(node, env, scope, params, hash, template, inverse, visitor) {
    var state = node.state;
    var name = params[0];
    var context = params[1];

    var container = env.container;

    // The render keyword presumes it can work without a router. This is really
    // only to satisfy the test:
    //
    //     {{view}} should not override class bindings defined on a child view&quot;
    //
    var router = container.lookup(&#039;router:main&#039;);

    _emberMetalCore2[&#039;default&#039;].assert(&#039;The second argument of {{render}} must be a path, e.g. {{render &quot;post&quot; post}}.&#039;, params.length &lt; 2 || (0, _emberMetalStreamsUtils.isStream)(params[1]));

    if (params.length === 1) {
      // use the singleton controller
      _emberMetalCore2[&#039;default&#039;].assert(&#039;You can only use the {{render}} helper once without a model object as &#039; + &#039;its second argument, as in {{render &quot;post&quot; post}}.&#039;, !router || !router._lookupActiveComponentNode(name));
    } else if (params.length !== 2) {
      throw new _emberMetalError2[&#039;default&#039;](&#039;You must pass a templateName to render&#039;);
    }

    // # legacy namespace
    name = name.replace(/\//g, &#039;.&#039;);
    // \ legacy slash as namespace support

    var templateName = &#039;template:&#039; + name;
    _emberMetalCore2[&#039;default&#039;].assert(&#039;You used `{{render \&#039;&#039; + name + &#039;\&#039;}}`, but \&#039;&#039; + name + &#039;\&#039; can not be &#039; + &#039;found as either a template or a view.&#039;, container._registry.has(&#039;view:&#039; + name) || container._registry.has(templateName) || !!template);

    var view = container.lookup(&#039;view:&#039; + name);
    if (!view) {
      view = container.lookup(&#039;view:default&#039;);
    }
    var viewHasTemplateSpecified = view &amp;&amp; !!(0, _emberMetalProperty_get.get)(view, &#039;template&#039;);
    if (!template &amp;&amp; !viewHasTemplateSpecified) {
      template = container.lookup(templateName);
    }

    if (view) {
      view.ownerView = env.view.ownerView;
    }

    // provide controller override
    var controllerName;
    var controllerFullName;

    if (hash.controller) {
      controllerName = hash.controller;
      controllerFullName = &#039;controller:&#039; + controllerName;
      delete hash.controller;

      _emberMetalCore2[&#039;default&#039;].assert(&#039;The controller name you supplied \&#039;&#039; + controllerName + &#039;\&#039; &#039; + &#039;did not resolve to a controller.&#039;, container._registry.has(controllerFullName));
    } else {
      controllerName = name;
      controllerFullName = &#039;controller:&#039; + controllerName;
    }

    var parentController = (0, _emberMetalStreamsUtils.read)(scope.locals.controller);
    var controller;

    // choose name
    if (params.length &gt; 1) {
      var factory = container.lookupFactory(controllerFullName) || (0, _emberRoutingSystemGenerate_controller.generateControllerFactory)(container, controllerName);

      controller = factory.create({
        model: (0, _emberMetalStreamsUtils.read)(context),
        parentController: parentController,
        target: parentController
      });

      node.addDestruction(controller);
    } else {
      controller = container.lookup(controllerFullName) || (0, _emberRoutingSystemGenerate_controller2[&#039;default&#039;])(container, controllerName);

      controller.setProperties({
        target: parentController,
        parentController: parentController
      });
    }

    if (view) {
      view.set(&#039;controller&#039;, controller);
    }
    state.controller = controller;

    hash.viewName = (0, _emberRuntimeSystemString.camelize)(name);

    // var state = node.state;
    // var parentView = scope.view;
    if (template &amp;&amp; template.raw) {
      template = template.raw;
    }

    var options = {
      layout: null,
      self: controller
    };

    if (view) {
      options.component = view;
    }

    var nodeManager = _emberHtmlbarsNodeManagersViewNodeManager2[&#039;default&#039;].create(node, env, hash, options, state.parentView, null, null, template);
    state.manager = nodeManager;

    if (router &amp;&amp; params.length === 1) {
      router._connectActiveComponentNode(name, nodeManager);
    }

    nodeManager.render(env, hash, visitor);
  },

  rerender: function rerender(node, env, scope, params, hash, template, inverse, visitor) {
    var model = (0, _emberMetalStreamsUtils.read)(params[1]);
    node.state.controller.set(&#039;model&#039;, model);
  }
};

function childOutletState(name, env) {
  var topLevel = env.view.ownerView;
  if (!topLevel || !topLevel.outletState) {
    return;
  }

  var outletState = topLevel.outletState;
  if (!outletState.main) {
    return;
  }

  var selectedOutletState = outletState.main.outlets[&#039;__ember_orphans__&#039;];
  if (!selectedOutletState) {
    return;
  }
  var matched = selectedOutletState.outlets[name];
  if (matched) {
    var childState = Object.create(null);
    childState[matched.render.outlet] = matched;
    matched.wasUsed = true;
    return childState;
  }
}

function isStable(a, b) {
  if (!a &amp;&amp; !b) {
    return true;
  }
  if (!a || !b) {
    return false;
  }
  for (var outletName in a) {
    if (!isStableOutlet(a[outletName], b[outletName])) {
      return false;
    }
  }
  return true;
}

function isStableOutlet(a, b) {
  if (!a &amp;&amp; !b) {
    return true;
  }
  if (!a || !b) {
    return false;
  }
  a = a.render;
  b = b.render;
  for (var key in a) {
    if (a.hasOwnProperty(key)) {
      // name is only here for logging &amp; debugging. If two different
      // names result in otherwise identical states, they&#039;re still
      // identical.
      if (a[key] !== b[key] &amp;&amp; key !== &#039;name&#039;) {
        return false;
      }
    }
  }
  return true;
}
module.exports = exports[&#039;default&#039;];</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
