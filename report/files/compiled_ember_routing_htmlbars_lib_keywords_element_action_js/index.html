<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - compiled\ember-routing-htmlbars\lib\keywords\element-action.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>compiled\ember-routing-htmlbars\lib\keywords\element-action.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">63.89</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">186</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">41.26</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">1.80</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">&#039;use strict&#039;;

Object.defineProperty(exports, &#039;__esModule&#039;, {
  value: true
});

function _interopRequireDefault(obj) { return obj &amp;&amp; obj.__esModule ? obj : { &#039;default&#039;: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i &lt; arr.length; i++) arr2[i] = arr[i]; return arr2; } else { return Array.from(arr); } }

var _emberMetalCore = require(&#039;ember-metal/core&#039;);

var _emberMetalCore2 = _interopRequireDefault(_emberMetalCore);

// assert

var _emberMetalFeatures = require(&#039;ember-metal/features&#039;);

var _emberMetalFeatures2 = _interopRequireDefault(_emberMetalFeatures);

var _emberMetalUtils = require(&#039;ember-metal/utils&#039;);

var _emberMetalRun_loop = require(&#039;ember-metal/run_loop&#039;);

var _emberMetalRun_loop2 = _interopRequireDefault(_emberMetalRun_loop);

var _emberViewsStreamsUtils = require(&#039;ember-views/streams/utils&#039;);

var _emberViewsSystemUtils = require(&#039;ember-views/system/utils&#039;);

var _emberViewsSystemAction_manager = require(&#039;ember-views/system/action_manager&#039;);

var _emberViewsSystemAction_manager2 = _interopRequireDefault(_emberViewsSystemAction_manager);

function assert(message, test) {
  // This only exists to prevent defeatureify from error when attempting
  // to transform the same source twice (tldr; you can&#039;t nest stripped statements)
  _emberMetalCore2[&#039;default&#039;].assert(message, test);
}

exports[&#039;default&#039;] = {
  setupState: function setupState(state, env, scope, params, hash) {
    var getStream = env.hooks.get;
    var read = env.hooks.getValue;

    var actionName = read(params[0]);

    if ((0, _emberMetalFeatures2[&#039;default&#039;])(&#039;ember-routing-htmlbars-improved-actions&#039;)) {
      assert(&#039;You specified a quoteless path to the {{action}} helper &#039; + &#039;which did not resolve to an action name (a string). &#039; + &#039;Perhaps you meant to use a quoted actionName? (e.g. {{action \&#039;save\&#039;}}).&#039;, typeof actionName === &#039;string&#039; || typeof actionName === &#039;function&#039;);
    } else {
      assert(&#039;You specified a quoteless path to the {{action}} helper &#039; + &#039;which did not resolve to an action name (a string). &#039; + &#039;Perhaps you meant to use a quoted actionName? (e.g. {{action \&#039;save\&#039;}}).&#039;, typeof actionName === &#039;string&#039;);
    }

    var actionArgs = [];
    for (var i = 1, l = params.length; i &lt; l; i++) {
      actionArgs.push((0, _emberViewsStreamsUtils.readUnwrappedModel)(params[i]));
    }

    var target;
    if (hash.target) {
      if (typeof hash.target === &#039;string&#039;) {
        target = read(getStream(env, scope, hash.target));
      } else {
        target = read(hash.target);
      }
    } else {
      target = read(scope.locals.controller) || read(scope.self);
    }

    return { actionName: actionName, actionArgs: actionArgs, target: target };
  },

  isStable: function isStable(state, env, scope, params, hash) {
    return true;
  },

  render: function render(node, env, scope, params, hash, template, inverse, visitor) {
    var actionId = env.dom.getAttribute(node.element, &#039;data-ember-action&#039;) || (0, _emberMetalUtils.uuid)();

    ActionHelper.registerAction({
      actionId: actionId,
      node: node,
      eventName: hash.on || &#039;click&#039;,
      bubbles: hash.bubbles,
      preventDefault: hash.preventDefault,
      withKeyCode: hash.withKeyCode,
      allowedKeys: hash.allowedKeys
    });

    node.cleanup = function () {
      ActionHelper.unregisterAction(actionId);
    };

    env.dom.setAttribute(node.element, &#039;data-ember-action&#039;, actionId);
  }
};
var ActionHelper = {};

exports.ActionHelper = ActionHelper;
// registeredActions is re-exported for compatibility with older plugins
// that were using this undocumented API.
ActionHelper.registeredActions = _emberViewsSystemAction_manager2[&#039;default&#039;].registeredActions;

ActionHelper.registerAction = function (_ref) {
  var actionId = _ref.actionId;
  var node = _ref.node;
  var eventName = _ref.eventName;
  var preventDefault = _ref.preventDefault;
  var bubbles = _ref.bubbles;
  var allowedKeys = _ref.allowedKeys;

  var actions = _emberViewsSystemAction_manager2[&#039;default&#039;].registeredActions[actionId];

  if (!actions) {
    actions = _emberViewsSystemAction_manager2[&#039;default&#039;].registeredActions[actionId] = [];
  }

  actions.push({
    eventName: eventName,
    handler: function handler(event) {
      if (!isAllowedEvent(event, allowedKeys)) {
        return true;
      }

      if (preventDefault !== false) {
        event.preventDefault();
      }

      if (bubbles === false) {
        event.stopPropagation();
      }

      var _node$state = node.state;
      var target = _node$state.target;
      var actionName = _node$state.actionName;
      var actionArgs = _node$state.actionArgs;

      (0, _emberMetalRun_loop2[&#039;default&#039;])(function runRegisteredAction() {
        if ((0, _emberMetalFeatures2[&#039;default&#039;])(&#039;ember-routing-htmlbars-improved-actions&#039;)) {
          if (typeof actionName === &#039;function&#039;) {
            actionName.apply(target, actionArgs);
            return;
          }
        }
        if (target.send) {
          target.send.apply(target, [actionName].concat(_toConsumableArray(actionArgs)));
        } else {
          _emberMetalCore2[&#039;default&#039;].assert(&#039;The action \&#039;&#039; + actionName + &#039;\&#039; did not exist on &#039; + target, typeof target[actionName] === &#039;function&#039;);

          target[actionName].apply(target, actionArgs);
        }
      });
    }
  });

  return actionId;
};

ActionHelper.unregisterAction = function (actionId) {
  delete _emberViewsSystemAction_manager2[&#039;default&#039;].registeredActions[actionId];
};

var MODIFIERS = [&#039;alt&#039;, &#039;shift&#039;, &#039;meta&#039;, &#039;ctrl&#039;];
var POINTER_EVENT_TYPE_REGEX = /^click|mouse|touch/;

function isAllowedEvent(event, allowedKeys) {
  if (typeof allowedKeys === &#039;undefined&#039;) {
    if (POINTER_EVENT_TYPE_REGEX.test(event.type)) {
      return (0, _emberViewsSystemUtils.isSimpleClick)(event);
    } else {
      allowedKeys = &#039;&#039;;
    }
  }

  if (allowedKeys.indexOf(&#039;any&#039;) &gt;= 0) {
    return true;
  }

  for (var i = 0, l = MODIFIERS.length; i &lt; l; i++) {
    if (event[MODIFIERS[i] + &#039;Key&#039;] &amp;&amp; allowedKeys.indexOf(MODIFIERS[i]) === -1) {
      return false;
    }
  }

  return true;
}</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ complexity.cyclomatic }} <br>
    Length : {{ complexity.halstead.length }} <br>
    Difficulty : {{ complexity.halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ complexity.halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
